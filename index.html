<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Michigan Liquor Price Search</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }
        
        .search-section {
            margin-bottom: 30px;
        }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            margin-bottom: 15px;
        }
        
        button:hover {
            background: #0056b3;
        }
        
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            box-sizing: border-box;
        }
        
        input:focus {
            border-color: #007bff;
            outline: none;
        }
        
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            display: none;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .help-text {
            background: #e9ecef;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
            color: #495057;
            margin-top: 10px;
        }
        
        .results {
            margin-top: 20px;
        }
        
        .product {
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 15px;
            padding: 15px;
            background: white;
        }
        
        .product-name {
            font-size: 18px;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 10px;
        }
        
        .product-details {
            margin-bottom: 15px;
        }
        
        .detail-row {
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .prices {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        
        .price-box {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            flex: 1;
            min-width: 120px;
        }
        
        .price-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .price-value {
            font-size: 16px;
            font-weight: bold;
            color: #007bff;
        }
        
        .codes {
            font-size: 12px;
            color: #666;
            margin-top: 10px;
        }
        
        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üç∑ Michigan Liquor Price Search</h1>
        <p class="subtitle">Search the Michigan Liquor Control Commission price database</p>
        
        <div class="search-section">
            <button id="loadBtn">Load Sample Data</button>
            <div id="status" class="status"></div>
            
            <input type="text" id="searchBox" placeholder="Search by code, name, or type..." disabled>
            
            <div class="help-text">
                <strong>Search Tips:</strong> Try "Grey Goose", "Bourbon", "Vodka", or product codes like "00121"
            </div>
        </div>
        
        <div id="results" class="results"></div>
    </div>

    <script>
        var liquorData = [];
        var isLoaded = false;
        
        // Sample data
        var sampleProducts = [
            {
                code: "00121",
                name: "BANKER'S CLUB BLEND",
                type: "AMERICAN BLEND",
                vendor: "LAIRD AND CO",
                size: "1000 ML",
                proof: "80.0",
                onPrice: 7.62,
                offPrice: 7.62,
                shelfPrice: 8.99,
                upc1: "00084848241207"
            },
            {
                code: "00166",
                name: "GREY GOOSE LE CITRON",
                type: "FLAVORED VODKA",
                vendor: "BACARDI USA",
                size: "750 ML",
                proof: "80.0",
                onPrice: 21.20,
                offPrice: 21.20,
                shelfPrice: 24.99,
                upc1: "00080480282042"
            },
            {
                code: "02980",
                name: "TITO'S HANDMADE VODKA",
                type: "VODKA",
                vendor: "FIFTH GENERATION",
                size: "750 ML",
                proof: "80.0",
                onPrice: 16.95,
                offPrice: 16.95,
                shelfPrice: 19.99,
                upc1: "00619947000020"
            },
            {
                code: "00358",
                name: "BUFFALO TRACE BOURBON",
                type: "STRAIGHT BOURBON",
                vendor: "SAZERAC CO INC",
                size: "750 ML",
                proof: "90.0",
                onPrice: 23.74,
                offPrice: 23.74,
                shelfPrice: 27.99,
                upc1: "00080244009236"
            },
            {
                code: "01486",
                name: "GREY GOOSE VODKA",
                type: "VODKA",
                vendor: "BACARDI USA",
                size: "1750 ML",
                proof: "80.0",
                onPrice: 42.37,
                offPrice: 42.37,
                shelfPrice: 49.96,
                upc1: "00080480280000"
            },
            {
                code: "02086",
                name: "BULLEIT BOURBON",
                type: "STRAIGHT BOURBON",
                vendor: "DIAGEO AMERICAS",
                size: "750 ML",
                proof: "90.0",
                onPrice: 23.74,
                offPrice: 23.74,
                shelfPrice: 27.99,
                upc1: "00087000055250"
            }
        ];
        
        function loadSampleData() {
            liquorData = sampleProducts;
            isLoaded = true;
            
            document.getElementById('searchBox').disabled = false;
            document.getElementById('loadBtn').textContent = 'Try Live Data';
            
            var status = document.getElementById('status');
            status.style.display = 'block';
            status.className = 'status success';
            status.innerHTML = '‚úÖ Sample data loaded! Try searching for "Grey Goose" or "Bourbon"';
            
            document.getElementById('searchBox').focus();
        }
        
        function formatPrice(price) {
            return '$' + price.toFixed(2);
        }
        
        function searchProducts(query) {
            if (!query || query.length < 2) return [];
            
            var searchTerm = query.toLowerCase();
            var results = [];
            
            for (var i = 0; i < liquorData.length; i++) {
                var product = liquorData[i];
                if (product.code.toLowerCase().indexOf(searchTerm) >= 0 ||
                    product.name.toLowerCase().indexOf(searchTerm) >= 0 ||
                    product.type.toLowerCase().indexOf(searchTerm) >= 0 ||
                    product.vendor.toLowerCase().indexOf(searchTerm) >= 0 ||
                    (product.upc1 && product.upc1.indexOf(searchTerm) >= 0)) {
                    results.push(product);
                }
            }
            
            return results.slice(0, 20);
        }
        
        function displayResults(products) {
            var resultsDiv = document.getElementById('results');
            
            if (products.length === 0) {
                resultsDiv.innerHTML = '<div class="no-results"><h3>No results found</h3><p>Try a different search term</p></div>';
                return;
            }
            
            var html = '';
            for (var i = 0; i < products.length; i++) {
                var p = products[i];
                html += '<div class="product">' +
                    '<div class="product-name">' + p.name + '</div>' +
                    '<div class="product-details">' +
                        '<div class="detail-row"><strong>Type:</strong> ' + p.type + '</div>' +
                        '<div class="detail-row"><strong>Size:</strong> ' + p.size + ' | <strong>Proof:</strong> ' + p.proof + '</div>' +
                        '<div class="detail-row"><strong>Vendor:</strong> ' + p.vendor + '</div>' +
                    '</div>' +
                    '<div class="prices">' +
                        '<div class="price-box">' +
                            '<div class="price-label">On-Premise</div>' +
                            '<div class="price-value">' + formatPrice(p.onPrice) + '</div>' +
                        '</div>' +
                        '<div class="price-box">' +
                            '<div class="price-label">Off-Premise</div>' +
                            '<div class="price-value">' + formatPrice(p.offPrice) + '</div>' +
                        '</div>' +
                        '<div class="price-box">' +
                            '<div class="price-label">Shelf Price</div>' +
                            '<div class="price-value">' + formatPrice(p.shelfPrice) + '</div>' +
                        '</div>' +
                    '</div>' +
                    '<div class="codes">Code: ' + p.code + 
                    (p.upc1 ? ' | UPC: ' + p.upc1 : '') + '</div>' +
                '</div>';
            }
            
            resultsDiv.innerHTML = html;
        }
        
        function tryLiveData() {
            var loadBtn = document.getElementById('loadBtn');
            var status = document.getElementById('status');
            
            loadBtn.disabled = true;
            loadBtn.textContent = 'Loading...';
            status.style.display = 'block';
            status.className = 'status';
            status.innerHTML = 'Trying to load live data from Michigan...';
            
            // Simple fetch attempt
            fetch('https://documents.apps.lara.state.mi.us/mlcc/webprbk.txt')
                .then(function(response) {
                    if (!response.ok) throw new Error('Network error');
                    return response.text();
                })
                .then(function(data) {
                    status.className = 'status success';
                    status.innerHTML = '‚úÖ Live data loaded successfully!';
                    loadBtn.textContent = 'Refresh Live Data';
                    loadBtn.disabled = false;
                    // Process the data here if needed
                })
                .catch(function(error) {
                    status.className = 'status error';
                    status.innerHTML = '‚ùå Could not load live data. Using sample data instead.';
                    loadBtn.textContent = 'Try Live Data Again';
                    loadBtn.disabled = false;
                });
        }
        
        // Event listeners
        document.getElementById('loadBtn').addEventListener('click', function() {
            if (!isLoaded) {
                loadSampleData();
            } else {
                tryLiveData();
            }
        });
        
        document.getElementById('searchBox').addEventListener('input', function(e) {
            if (!isLoaded) return;
            
            var query = e.target.value.trim();
            if (query.length >= 2) {
                var results = searchProducts(query);
                displayResults(results);
            } else {
                document.getElementById('results').innerHTML = '';
            }
        });
        
        // Auto-load sample data when page loads
        window.addEventListener('load', function() {
            loadSampleData();
        });
    </script>
</body>
</html>
